# HealthyPi Move specific configurations
CONFIG_HPI_TODAY_SCREEN=n
CONFIG_HPI_GSR_SCREEN=y
CONFIG_HPI_GSR_STRESS_INDEX=n

CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_BAS=y
CONFIG_BT_HRS=y
CONFIG_BT_DEVICE_NAME="healthypi move"
CONFIG_BT_DEVICE_APPEARANCE=833

CONFIG_BT_RX_STACK_SIZE=4096

CONFIG_BT_DIS=y
CONFIG_BT_DIS_PNP=n
CONFIG_BT_DIS_FW_REV=y
CONFIG_BT_DIS_MANUF="Protocentral"
CONFIG_BT_DIS_MODEL="Move"
#CONFIG_BT_DIS_SETTINGS=y
#CONFIG_BT_DIS_STR_MAX=100

# Reduced Bluetooth data packets for flash optimization
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# Memory Configuration - Restored for debugging
CONFIG_HEAP_MEM_POOL_SIZE=24576        
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=24576 
CONFIG_MAIN_STACK_SIZE=16384           

# CONFIG_PM_OVERRIDE_EXTERNAL_DRIVER_CHECK=y

# Zephyr OS Configuration - Debug enabled
CONFIG_SMF=y
CONFIG_EVENTS=y
CONFIG_CBPRINTF_FP_SUPPORT=y

# Enable debugging features for development
CONFIG_ASSERT=y
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_THREAD_INFO=y
CONFIG_THREAD_NAME=y
CONFIG_THREAD_STACK_INFO=y

# Size optimization disabled for debugging
#CONFIG_SIZE_OPTIMIZATIONS=y
#CONFIG_COMPILER_OPT="-Os"

# Peripheral device drivers
CONFIG_SENSOR=y
CONFIG_SENSOR_INFO=y
CONFIG_SENSOR_MAX30001=y
CONFIG_SENSOR_MAX32664D=y
CONFIG_SENSOR_MAX30208=y
#CONFIG_SENSOR_MAXM86146=y
CONFIG_SENSOR_MAX32664C=y
CONFIG_SENSOR_ASYNC_API=y

CONFIG_REGULATOR=y
CONFIG_ADC=n

CONFIG_SENSOR_BMI323_HPI=y
CONFIG_RTC=y
CONFIG_RTC_RV8263=y

CONFIG_INPUT=y
CONFIG_INPUT_CHSC5816=y

CONFIG_I2C=y
CONFIG_I2C_NRFX=y
CONFIG_FUEL_GAUGE=y
CONFIG_NRF_FUEL_GAUGE=y
CONFIG_NRF_FUEL_GAUGE_VARIANT_SECONDARY_CELL=y

CONFIG_DISPLAY=y
CONFIG_SH8601=y

CONFIG_INPUT_GPIO_KEYS=y

CONFIG_LED=n
CONFIG_REBOOT=y
CONFIG_PWM=n

# Filesystem & Internal Flash support to store data
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_MPU_ALLOW_FLASH_WRITE=y

# Enabled settings module and FS to store settings
CONFIG_SETTINGS=y
CONFIG_SETTINGS_RUNTIME=y
CONFIG_SETTINGS_FILE=y
CONFIG_SETTINGS_FILE_PATH="/lfs/sys/settings"

CONFIG_NVS=y

# LVGL Library Options - Debug configuration
CONFIG_LVGL=y
CONFIG_LV_COLOR_DEPTH_16=y
CONFIG_LV_COLOR_16_SWAP=y
CONFIG_LV_THEME_DEFAULT_DARK=y
CONFIG_LV_Z_MEM_POOL_SYS_HEAP=y
# Restored LVGL Memory Configuration for debugging
CONFIG_LV_Z_MEM_POOL_SIZE=24576         
#CONFIG_LV_MEM_CUSTOM=y
CONFIG_LV_Z_POINTER_INPUT_MSGQ_COUNT=50
CONFIG_LV_Z_POINTER_INPUT=y
#CONFIG_LV_DISP_DEF_REFR_PERIOD=30

# LVGL Font Options - Reduced font set to save flash
#CONFIG_LV_FONT_MONTSERRAT_12=y
#CONFIG_LV_FONT_MONTSERRAT_14=y
#CONFIG_LV_FONT_MONTSERRAT_16=y
CONFIG_LV_FONT_MONTSERRAT_20=y
CONFIG_LV_FONT_MONTSERRAT_24=y
#CONFIG_LV_FONT_MONTSERRAT_28=y
#CONFIG_LV_FONT_MONTSERRAT_34=y
#CONFIG_LV_FONT_MONTSERRAT_42=y
#CONFIG_LV_FONT_MONTSERRAT_48=y
#CONFIG_LV_FONT_MONTSERRAT_12_SUBPX=y
CONFIG_LV_FONT_DEFAULT_MONTSERRAT_24=y
#CONFIG_LV_USE_FONT_SUBPX=y

CONFIG_LV_USE_LABEL=y
CONFIG_LV_USE_MSGBOX=y
CONFIG_LV_USE_CHART=y
CONFIG_LV_USE_ROLLER=y
CONFIG_LV_USE_BUTTONMATRIX=y
CONFIG_LV_USE_SPINNER=y

CONFIG_LV_USE_CALENDAR=n
CONFIG_LV_USE_CHECKBOX=n
CONFIG_LV_USE_DROPDOWN=n
CONFIG_LV_USE_IMAGEBUTTON=n
CONFIG_LV_USE_KEYBOARD=n
CONFIG_LV_USE_LIST=n
CONFIG_LV_USE_MENU=n
CONFIG_LV_USE_LOTTIE=n
CONFIG_LV_USE_CANVAS=n
CONFIG_LV_USE_ANIMIMG=n
CONFIG_LV_USE_LED=n
CONFIG_LV_USE_LINE=n
CONFIG_LV_USE_SCALE=n
CONFIG_LV_USE_SPINBOX=n
CONFIG_LV_USE_TABLE=n
CONFIG_LV_USE_TABVIEW=n
CONFIG_LV_USE_TILEVIEW=n
CONFIG_LV_USE_WIN=n

# USB Configuration
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_PRODUCT="healthypi move"
CONFIG_USB_DEVICE_PID=0x0001
CONFIG_USB_DEVICE_VID=0x4440
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=n

# Enable the serial MCUmgr transport.
CONFIG_BASE64=y
#CONFIG_MCUMGR_TRANSPORT_UART=y
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_NORDIC_QSPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096
CONFIG_NORDIC_QSPI_NOR_STACK_WRITE_BUFFER_SIZE=16

CONFIG_PM_PARTITION_REGION_LITTLEFS_EXTERNAL=y
CONFIG_PM_PARTITION_SIZE_LITTLEFS=0x200000
CONFIG_PM_EXTERNAL_FLASH_MCUBOOT_SECONDARY=y

CONFIG_REQUIRES_FULL_LIBC=y
CONFIG_CMSIS_DSP=y
CONFIG_CMSIS_DSP_FILTERING=y

CONFIG_PM=y
CONFIG_PM_DEVICE=y
#CONFIG_PM_DEVICE_RUNTIME=y

# Enable the poweroff command (for power profiling)
CONFIG_POWEROFF=y

CONFIG_ZBUS=y

# Bootloader Configuration
CONFIG_BOOTLOADER_MCUBOOT=y
#CONFIG_SECURE_BOOT=y

# Enable MCUmgr and dependencies.

CONFIG_FLASH=y

CONFIG_MCUMGR=y
CONFIG_IMG_MANAGER=y
CONFIG_MCUMGR_GRP_IMG=y
CONFIG_MCUMGR_GRP_OS=y
CONFIG_MCUMGR_GRP_FS=y

CONFIG_NET_BUF=y
CONFIG_ZCBOR=y
CONFIG_CRC=y
CONFIG_MCUMGR=y
CONFIG_STREAM_FLASH=y
CONFIG_FLASH_MAP=y

CONFIG_MCUMGR_TRANSPORT_BT_REASSEMBLY=y
CONFIG_MCUMGR_TRANSPORT_NETBUF_SIZE=1024
CONFIG_MCUMGR_GRP_OS_MCUMGR_PARAMS=y
# Increased from 2048 to 4096 to prevent stack overflow during file downloads via SMP
# File system operations + CBOR encoding + network buffers require more stack space
CONFIG_MCUMGR_TRANSPORT_WORKQUEUE_STACK_SIZE=4096

CONFIG_MCUMGR_MGMT_NOTIFICATION_HOOKS=y
CONFIG_MCUMGR_GRP_IMG_UPLOAD_CHECK_HOOK=y
CONFIG_MCUMGR_GRP_IMG_STATUS_HOOKS=y

CONFIG_NCS_SAMPLE_MCUMGR_BT_OTA_DFU=y
CONFIG_NCS_SAMPLE_MCUMGR_BT_OTA_DFU_SPEEDUP=y


CONFIG_NCS_APPLICATION_BOOT_BANNER_STRING="HealthyPi Move"

# Debug logging options - Re-enabled for debugging
CONFIG_SERIAL=y
CONFIG_LOG=y
CONFIG_CONSOLE=y 
CONFIG_UART_CONSOLE=y

CONFIG_USE_SEGGER_RTT=n
CONFIG_SHELL_BACKEND_RTT=n 
CONFIG_LOG_BACKEND_RTT=n

# Enable individual sensor logging for debugging
CONFIG_SENSOR_LOG_LEVEL_INF=y
CONFIG_LV_USE_LOG=n
CONFIG_LV_LOG_LEVEL_WARN=y
CONFIG_DISPLAY_LOG_LEVEL_ERR=y
CONFIG_INPUT_LOG_LEVEL_ERR=y

#Setup individual log levels for each sensor - enabled for debugging
CONFIG_MAX32664C_LOG_LEVEL_INF=y
CONFIG_MAX32664D_LOG_LEVEL_INF=y
CONFIG_BMI323_HPI_LOG_LEVEL_INF=y
CONFIG_MAX30001_LOG_LEVEL_INF=y

CONFIG_MAX32664_UPDATER=y
CONFIG_MAX32664_UPDATER_LOG_LEVEL_ERR=y

# Init changes for QSPI XIP code placement
#CONFIG_CUSTOM_LINKER_SCRIPT="linker_arm_extxip.ld"
#CONFIG_FLASH_INIT_PRIORITY=40
#CONFIG_SHELL_BACKEND_SERIAL_INIT_PRIORITY=50
#CONFIG_CODE_DATA_RELOCATION=y
#CONFIG_NORDIC_QSPI_NOR_XIP=y

# Configure Bluetooth Security Manager
CONFIG_BT_SMP=y
CONFIG_BT_SIGNING=y
CONFIG_BT_BONDABLE=y

CONFIG_BT_KEYS_OVERWRITE_OLDEST=y
CONFIG_BT_MAX_PAIRED=2
CONFIG_BT_SETTINGS=y

CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
# CONFIG_CBPRINTF_FP_SUPPORT=y
# CONFIG_NEWLIB_LIBC=y
# CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y

# CONFIG_CBPRINTF_COMPLETE=y


# Enable full libc with float printf support

CONFIG_CBPRINTF_FP_SUPPORT=y
CONFIG_CBPRINTF_COMPLETE=y  


# CONFIG_MINIMAL_LIBC=y
CONFIG_CMSIS_DSP=y
CONFIG_CMSIS_DSP_TRANSFORM=y
CONFIG_CMSIS_DSP_SUPPORT=y
CONFIG_CMSIS_DSP_FASTMATH=y




